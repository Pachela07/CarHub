{% extends "skeleton.html" %}
{% block title %}AutoMarket — Find Your Next Car{% endblock %}
{% block content %}
<!-- Features -->
<section class="py-5 bg-light">
  <div class="container">
    <div class="row g-4 text-center">
      <div class="col-md-4">
        <div class="p-3">
          <h5>Certified Inspection</h5>
          <p class="mb-0 text-muted">
            Every car passes a multi-point inspection by our experts.
          </p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="p-3">
          <h5>Easy Financing</h5>
          <p class="mb-0 text-muted">
            Flexible payment plans to fit your budget.
          </p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="p-3">
          <h5>Nationwide Delivery</h5>
          <p class="mb-0 text-muted">
            Door-to-door delivery available across the country.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Inventory / Cards -->
<section id="inventory" class="py-5">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="h4 mb-0">Featured Inventory</h2>
      <small class="text-muted">Showing latest additions</small>
    </div>

    <div id="cardsRow" class="row g-4">
      {% for cars in db_cars %}
      <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <article
          class="card h-100 shadow-sm car-card"
          data-keywords=" {{ cars.model }} {{ cars.factory_year }}"
          data-price="{{ cars.value }}"
        >
          <div class="position-relative">
            <img
              src="{{ cars.photo.url|default:'https://source.unsplash.com/800x600/?car' }}"
              class="card-img-top"
              alt="{{ cars.model }}"
              loading="lazy"
              style="height: 180px; object-fit: cover"
            />
            <span
              class="badge bg-primary position-absolute"
              style="top: 10px; right: 10px"
              >{{ cars.value }}€</span
            >
          </div>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title mb-1">{{ cars.model }}</h5>
            <p class="text-muted mb-2 small">
              {{ cars.factory_year }} · {{ cars.plate|default:'N/A' }}
            </p>
            <p class="mb-3 small text-muted">
              {{ cars.description|default:''|truncatechars:80 }}
            </p>
            <div
              class="mt-auto d-flex justify-content-between align-items-center"
            >
              <button
                class="btn btn-sm btn-primary view-details"
                data-title="{{ cars.model }}"
                data-img="{{ cars.photo.url|default:'https://source.unsplash.com/1200x800/?car' }}"
                data-desc="{{ cars.model|default:'No description available'|escape }}"
              >
                View
              </button>
              <a href="#contact" class="btn btn-sm btn-outline-secondary"
                >Contact</a
              >
            </div>
          </div>
        </article>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Contact / Quote -->
<section id="contact" class="py-5 bg-light">
  <div class="container">
    <h3 class="mb-3">Get a Quote</h3>
    <form id="contactForm" class="row g-3">
      <div class="col-md-4">
        <input
          type="text"
          class="form-control"
          id="name"
          placeholder="Your name"
          required
        />
      </div>
      <div class="col-md-4">
        <input
          type="email"
          class="form-control"
          id="email"
          placeholder="Email"
          required
        />
      </div>
      <div class="col-md-4">
        <input type="tel" class="form-control" id="phone" placeholder="Phone" />
      </div>
      <div class="col-12">
        <textarea
          class="form-control"
          id="message"
          rows="3"
          placeholder="Tell us what you're looking for"
        ></textarea>
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-primary">Request Quote</button>
      </div>
    </form>
  </div>
</section>

<!-- Modal: car details -->
<div class="modal fade" id="carModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="carModalTitle">Car Details</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <img
          id="carModalImg"
          src=""
          alt=""
          class="img-fluid mb-3 w-100"
          style="max-height: 420px; object-fit: cover"
        />
        <p id="carModalDesc" class="mb-0"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <a href="#contact" class="btn btn-primary">Contact Seller</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
